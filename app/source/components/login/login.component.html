<div class="login-container" layout="column" layout-align="center center" flex>
  <md-card class="login-card">
    <md-card-header class="login-fixed-header" flex="noshrink">
      <md-card-avatar class="user-icon">
        <md-icon class="md-avatar-icon" ng-if="!loginVm.profileImage">person</md-icon>
        <img class="md-user-avatar" ng-if="loginVm.profileImage" ng-src="{{loginVm.profileImage}}"/>
        <md-progress-circular md-mode="indeterminate" class="md-accent" ng-if="loginVm.loading"></md-progress-circular>
      </md-card-avatar>
      <md-card-header-text class="title-text" layout="row" layout-align="start center">
        <div flex>
          <div class="md-headline">{{$state.current.data.pageTitle}}</div>
          <div class="md-body-1 greeting" ng-if="$state.current.data.subTitle || loginVm.subTitle">{{loginVm.subTitle || $state.current.data.subTitle}}</div>
        </div>
        <md-button ng-if="loginVm.loginUserHistory && loginVm.loginFormCurrentPage.index !== loginVm.pages.signInOptions.index"
                   class="md-icon-button" aria-label="Choose account" ng-click="loginVm.chooseAccount()">
          <md-icon>keyboard_arrow_down</md-icon>
        </md-button>
      </md-card-header-text>
    </md-card-header>
    <div ui-view="email"></div>
    <div ui-view="password"></div>
    <div ui-view="signUp"></div>
    <div ui-view="signInOptions"></div>
  </md-card>
</div>
